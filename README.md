# RAG Chatbot ICTA Technology - Sistema H√≠brido RAG + FLAN-T5 ü§ñüß†

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg?logo=python)](https://python.org)
[![FLAN-T5](https://img.shields.io/badge/Model-FLAN--T5--Optimized-orange.svg)](https://huggingface.co/google/flan-t5-base)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![GitHub](https://img.shields.io/badge/GitHub-jesseff20%2Frag--chatbot-black.svg?logo=github)](https://github.com/jesseff20/rag-chatbot)
[![ICTA Technology](https://img.shields.io/badge/ICTA-Technology-orange.svg)](https://ictatechnology.com)

**Sistema RAG H√≠brido com FLAN-T5 Otimizado - IA Avan√ßada em Portugu√™s!**

> üöÄ **Vers√£o 4.0**: Sistema H√≠brido RAG + FLAN-T5 com tokens aumentados drasticamente, prompts otimizados para portugu√™s e fallback inteligente!

---

## üß† **INOVA√á√ÉO: Sistema H√≠brido RAG + FLAN-T5**

### üéØ **Arquitetura Inteligente H√≠brida**
O sistema combina **RAG (Retrieval-Augmented Generation)** com **FLAN-T5** otimizado:
- üîç **RAG Avan√ßado**: Busca nos documentos da ICTA com score de qualidade
- üß† **FLAN-T5 Otimizado**: Processa contexto + pergunta para respostas estruturadas
- ÔøΩ **Fallback Inteligente**: M√∫ltiplas camadas de seguran√ßa para sempre responder
- ÔøΩ **Interface Limpa**: Usu√°rio v√™ apenas pergunta e resposta final

### üöÄ **Tokens Drasticamente Aumentados**

| Par√¢metro | Vers√£o Anterior | **Vers√£o 4.0** | Melhoria |
|-----------|----------------|-----------------|----------|
| **Max Tokens** | 150 | **10,000** | +6,567% |
| **Chunk Size** | 400 | **600** | +50% |
| **Top-K Results** | 8 | **12** | +50% |
| **Overlap** | 80 | **120** | +50% |
| **FLAN-T5 Tokens** | 150 | **300** | +100% |

### üáßüá∑ **Otimizado para Portugu√™s**
- **Prompts Nativos**: Estruturados especificamente para portugu√™s brasileiro
- **FLAN-T5 Base**: Modelo mais robusto e est√°vel
- **Limpeza Autom√°tica**: Remove tags t√©cnicas automaticamente
- **Fallback M√∫ltiplo**: RAG direto ‚Üí FLAN-T5 ‚Üí Resposta padr√£o

### ü§î **Fluxo de Processamento Inteligente**

```mermaid
graph TD
    A[Pergunta do Usu√°rio] --> B[Busca RAG - Top 12]
    B --> C{Score ‚â• 0.4?}
    C -->|SIM| D[FLAN-T5 + Contexto RAG]
    C -->|N√ÉO| E[FLAN-T5 Conhecimento Geral]
    D --> F{Resposta V√°lida?}
    E --> F
    F -->|SIM| G[Resposta Final]
    F -->|N√ÉO| H[Fallback RAG Direto]
    H --> G
```

### üé≠ **Exemplo de Intera√ß√£o Otimizada**

```
üë§ Voc√™: "O que √© Business Intelligence?"

üîç Buscando na base ICTA... (12 resultados, score: 0.85)
üß† Processando com FLAN-T5 otimizado...

ü§ñ ICTA Assistant:
Business Intelligence (BI) √© um conjunto de tecnologias e processos que 
transformam dados brutos em informa√ß√µes estrat√©gicas para tomada de decis√£o.

Na ICTA Technology, oferecemos solu√ß√µes completas de BI incluindo:
‚Ä¢ Dashboards executivos com Power BI e Tableau
‚Ä¢ Relat√≥rios automatizados e personalizados  
‚Ä¢ Integra√ß√£o com sistemas ERP como TOTVS
‚Ä¢ An√°lise preditiva e intelig√™ncia artificial

Nossos especialistas ajudam sua empresa a extrair insights valiosos dos 
dados para impulsionar o crescimento e otimizar processos.
```

```
ÔøΩ Voc√™: "Ol√°!"

üß† Processando cumprimento com FLAN-T5...

ü§ñ ICTA Assistant:
Ol√°! Sou o assistente da ICTA Technology. Posso ajudar com informa√ß√µes 
sobre Business Intelligence, automa√ß√£o de processos e intelig√™ncia 
artificial. Como posso ajud√°-lo?
```

### üîÑ **Sistema de Fallback Robusto**
1. **Primeira Tentativa**: FLAN-T5 com contexto RAG
2. **Segunda Tentativa**: FLAN-T5 com conhecimento geral
3. **√öltima Camada**: Contexto RAG direto
4. **Seguran√ßa Final**: Resposta padr√£o profissional

### üíæ **Processamento Silencioso**
- ‚úÖ **Interface Limpa**: Sem informa√ß√µes t√©cnicas expostas
- ‚úÖ **Scores Ocultos**: Qualidade processada internamente
- ‚úÖ **Tempo Real**: Feedback visual durante processamento
- ‚úÖ **Hist√≥rico Completo**: Conversas salvas automaticamente

---

## ‚ú® **Caracter√≠sticas da Interface Interativa**

### üé® **Menus Coloridos e Intuitivos**
- **Verde**: Sucesso e confirma√ß√µes
- **Azul**: Informa√ß√µes e processamento  
- **Amarelo**: Alertas e dicas importantes
- **Vermelho**: Erros com solu√ß√µes claras
- **Ciano**: T√≠tulos e navega√ß√£o

### üìö **Sistema de Ajuda Completo**
- **Como come√ßar**: Guia passo-a-passo para iniciantes
- **Preparar documentos**: Como organizar seus arquivos
- **Solu√ß√£o de problemas**: Erros comuns e como resolver
- **Dicas avan√ßadas**: Como obter melhores resultados
- **Sobre o projeto**: Informa√ß√µes t√©cnicas detalhadas

## üöÄ Menu Principal - Super Simples!

Quando voc√™ executa o programa, v√™ este menu intuitivo:

```
ü§ñ RAG Chatbot ICTA Technology - Vers√£o Simplificada
====================================================

üìã MENU PRINCIPAL

 1. üèóÔ∏è Construir Base de Conhecimento
    Processa seus arquivos .txt e cria o √≠ndice de busca

 2. üí¨ Iniciar Chat Interativo  
    Conversa com o chatbot usando a base criada

 3. üìä Verificar Status do Sistema
    Mostra informa√ß√µes sobre arquivos e configura√ß√µes

 4. ‚öôÔ∏è Configura√ß√µes
    Ajustar par√¢metros b√°sicos do sistema

 5. üìö Ajuda
    Guias, exemplos e solu√ß√£o de problemas

 6. üö™ Sair
    Encerra o programa

üéØ Escolha uma op√ß√£o (1-6):
```

## üõ†Ô∏è Instala√ß√£o Super F√°cil

### üì• **Passo 1: Baixar o Projeto**

```bash
# Op√ß√£o A: Git (recomendado)
git clone https://github.com/jesseff20/rag-chatbot.git
cd rag-chatbot

# Op√ß√£o B: Download direto
# Baixe o ZIP do GitHub e extraia
```

### üêç **Passo 2: Instalar Python e Depend√™ncias**

```bash
# Instalar automaticamente (recomendado)
python setup.py install

# OU instalar manualmente
pip install -r requirements.txt
```

### üöÄ **Passo 3: Executar o Programa**

```bash
python rag_chatbot_icta.py
```

**√â s√≥ isso!** O programa abre com a interface interativa.

## üìÅ Como Preparar Seus Documentos

### üìÇ **Estrutura de Dados JSONL**
```
data/
‚îú‚îÄ‚îÄ faq_geral_icta.jsonl
‚îú‚îÄ‚îÄ integracoes_totvs.jsonl  
‚îú‚îÄ‚îÄ business_intelligence.jsonl
‚îú‚îÄ‚îÄ automacao_processos.jsonl
‚îî‚îÄ‚îÄ cortesia_saudacoes.jsonl
```

### üìù **Formato dos Arquivos .jsonl (Recomendado)**
```json
{"pergunta": "O que √© Business Intelligence?", "resposta": "Business Intelligence (BI) √© um conjunto de tecnologias e processos que transformam dados brutos em informa√ß√µes estrat√©gicas para tomada de decis√£o.", "tags": ["bi", "business_intelligence", "dados"]}
{"pergunta": "Quais ferramentas de BI voc√™s usam?", "resposta": "Trabalhamos com Power BI, Tableau, dashboards personalizados e integra√ß√£o com sistemas ERP como TOTVS.", "tags": ["power_bi", "tableau", "ferramentas"]}
{"pergunta": "Como entrar em contato?", "resposta": "Entre em contato conosco atrav√©s do nosso site ou telefone para uma consultoria personalizada.", "tags": ["contato", "suporte"]}
```

### üìù **Formato Alternativo .txt (Compat√≠vel)**
```
P: Como funciona o sistema?
R: Nosso sistema utiliza intelig√™ncia artificial para...

P: Quais s√£o os pre√ßos?
R: Oferecemos planos a partir de R$ 99/m√™s...

P: Como entrar em contato?
R: Entre em contato pelo WhatsApp (11) 99999-9999...
```

### üí° **Dicas Importantes**
- ‚úÖ **JSONL Prefer√≠vel**: Melhor estrutura e metadados
- ‚úÖ Use perguntas que seus clientes realmente fazem
- ‚úÖ Respostas claras e diretas (m√°ximo 600 tokens)
- ‚úÖ Inclua tags relevantes para melhor busca
- ‚úÖ Organize por temas em arquivos separados
- ‚úÖ **Base Atual**: 546 entradas em 8 arquivos JSONL
- ‚ùå Evite textos muito longos
- ‚ùå N√£o use informa√ß√µes desatualizadas

## üéØ Como Usar - Passo a Passo Completo

### **1Ô∏è‚É£ Primeira Execu√ß√£o**
1. Execute `python rag_chatbot_icta.py`
2. Escolha op√ß√£o `3 - Verificar Status` para ver o que precisa
3. O sistema te guiar√° sobre o que fazer

### **2Ô∏è‚É£ Preparar Documentos**  
1. Crie a pasta `data` (ou use a existente)
2. Adicione seus arquivos .txt com formato P: pergunta R: resposta
3. Escolha op√ß√£o `5 - Ajuda > 2 - Preparar documentos` para ver exemplos

### **3Ô∏è‚É£ Construir Base de Conhecimento**
1. Escolha op√ß√£o `1 - Construir Base de Conhecimento`
2. O sistema mostrar√° quantos arquivos encontrou
3. Confirme e aguarde o processamento (primeira vez demora mais)

### **4Ô∏è‚É£ Conversar com o Chatbot**
1. Escolha op√ß√£o `2 - Iniciar Chat Interativo`
2. Digite suas perguntas naturalmente
3. Use comandos especiais:
   - `help` - ajuda do chat
   - `status` - √∫ltimas conversas
   - `sair` - voltar ao menu

### **5Ô∏è‚É£ Monitorar e Melhorar**
1. Use `3 - Status` para ver estat√≠sticas
2. Teste com perguntas reais
3. Adicione mais documentos conforme necess√°rio
4. Reconstrua a base ap√≥s mudan√ßas

## üîß Tecnologias e Requisitos

### üêç **Python e Depend√™ncias**
- **Python 3.8+** (obrigat√≥rio)
- **FAISS**: Busca vetorial Facebook AI
- **Sentence Transformers**: Embeddings multil√≠ngues 
- **FLAN-T5 Base**: Modelo de linguagem Google otimizado
- **Transformers**: Framework Hugging Face
- **Torch**: Framework de deep learning
- **Colorama**: Interface colorida

### üíæ **Requisitos do Sistema**
- **RAM**: M√≠nimo 6GB (recomendado 12GB para FLAN-T5 base)
- **Espa√ßo**: ~3GB para modelos otimizados
- **Internet**: Apenas para download inicial
- **OS**: Windows, Linux, macOS
- **GPU**: Opcional (CUDA suportado para acelera√ß√£o)

### ‚ö° **Performance Otimizada**
- **Primeira execu√ß√£o**: 5-20 minutos (download FLAN-T5 base)
- **Constru√ß√£o da base**: 2-15 minutos (546 documentos JSONL)
- **Chat RAG**: Respostas em 3-8 segundos
- **Chat FLAN-T5**: Respostas em 5-15 segundos
- **Funcionamento**: 100% offline ap√≥s configura√ß√£o

### üöÄ **Configura√ß√µes Atuais**
- **Chunks**: 600 tokens com overlap de 120
- **Top-K**: 12 melhores resultados por busca
- **FLAN-T5**: At√© 300 tokens de sa√≠da
- **RAG Score**: Threshold 0.4 para qualidade
- **Fallback**: M√∫ltiplas camadas de seguran√ßa

## üÜò Solu√ß√£o de Problemas Comum

### ‚ùå **"Nenhum arquivo .txt encontrado"**
```bash
# Solu√ß√£o:
1. Verifique se a pasta 'data' existe
2. Confirme que h√° arquivos .txt na pasta  
3. Use a op√ß√£o 5 - Ajuda para ver exemplos
```

### ‚ùå **"Erro de mem√≥ria"**
```bash
# Solu√ß√£o:
1. Feche outros programas pesados
2. Use chunks menores (edite o c√≥digo)
3. Considere um modelo menor (flan-t5-small)
```

### ‚ùå **"Respostas ruins"**
```bash
# Solu√ß√£o:
1. Melhore a qualidade dos documentos
2. Use textos mais espec√≠ficos
3. Adicione mais exemplos similares
4. Verifique se as palavras-chave est√£o corretas
```

### ‚ùå **"Modelo n√£o encontrado"**
```bash
# Solu√ß√£o:
1. Verifique sua conex√£o com internet
2. Aguarde o download (pode demorar na primeira vez)
3. Tente novamente ap√≥s alguns minutos
```

## üìä Estrutura do Projeto

```
rag-chatbot/
‚îú‚îÄ‚îÄ üìÑ rag_chatbot_icta.py        # Programa principal (interface interativa)
‚îú‚îÄ‚îÄ üìÑ requirements.txt           # Depend√™ncias Python
‚îú‚îÄ‚îÄ üìÑ setup.py                   # Instalador autom√°tico
‚îú‚îÄ‚îÄ üìÑ README.md                  # Este arquivo
‚îú‚îÄ‚îÄ üìÅ data/                      # Seus documentos .txt
‚îÇ   ‚îú‚îÄ‚îÄ faq_geral_icta.txt
‚îÇ   ‚îú‚îÄ‚îÄ integracoes_totvs.txt
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ üìÅ index/                     # √çndices gerados automaticamente
‚îÇ   ‚îú‚îÄ‚îÄ faiss.index
‚îÇ   ‚îú‚îÄ‚îÄ meta.jsonl
‚îÇ   ‚îî‚îÄ‚îÄ settings.json
‚îú‚îÄ‚îÄ üìÅ history/                   # Hist√≥rico de conversas
‚îú‚îÄ‚îÄ üìÅ tests/                     # Testes automatizados
‚îî‚îÄ‚îÄ üìÅ docs/                      # Documenta√ß√£o adicional
```

## ü§ù Contribuindo

Quer ajudar a melhorar o projeto? Ficamos felizes!

### üêõ **Reportar Problemas**
- Use o [GitHub Issues](https://github.com/jesseff20/rag-chatbot/issues)
- Descreva o problema detalhadamente
- Inclua prints se poss√≠vel

### üí° **Sugerir Melhorias**
- Abra um [GitHub Discussion](https://github.com/jesseff20/rag-chatbot/discussions)
- Explique sua ideia
- Cite casos de uso

### üîß **Contribuir com C√≥digo**
- Fa√ßa um fork do projeto
- Crie uma branch para sua feature
- Envie um Pull Request

## üìû Suporte e Contato

### üÜò **Precisa de Ajuda?**
1. **GitHub Issues**: [Reportar problemas](https://github.com/jesseff20/rag-chatbot/issues)
2. **Discuss√µes**: [GitHub Discussions](https://github.com/jesseff20/rag-chatbot/discussions)  
3. **Email**: jesse.fernandes@ictatechnology.com.br
4. **Sistema de Ajuda**: Use a op√ß√£o 5 no menu do programa

### üë®‚Äçüíª **Sobre o Desenvolvedor**
- **Nome**: Jesse Fernandes
- **Empresa**: ICTA Technology
- **GitHub**: [@jesseff20](https://github.com/jesseff20)
- **Email**: jesse.fernandes@ictatechnology.com

## üìú Licen√ßa

Este projeto est√° licenciado sob a **MIT License** - veja o arquivo [LICENSE](LICENSE) para detalhes.

### üéÅ **O que isso significa?**
- ‚úÖ Uso comercial permitido
- ‚úÖ Modifica√ß√£o permitida  
- ‚úÖ Distribui√ß√£o permitida
- ‚úÖ Uso privado permitido
- ‚ö†Ô∏è Sem garantia

## üôè Agradecimentos

- **FAISS Team**: Biblioteca de busca vetorial fant√°stica
- **Hugging Face**: Modelos e ferramentas incr√≠veis
- **Sentence Transformers**: Embeddings de qualidade
- **Google**: Modelo FLAN-T5 open-source
- **Comunidade Python**: Ecossistema incr√≠vel

---

## üöÄ Changelog da Vers√£o 4.0

### ‚ú® **Inova√ß√µes Revolucion√°rias**
- **Sistema H√≠brido RAG + FLAN-T5**: Combina busca vetorial com gera√ß√£o de linguagem
- **Tokens Aumentados 6500%**: De 150 para 10,000 tokens por processamento
- **FLAN-T5 Base**: Upgrade para modelo mais robusto e preciso
- **Prompts Nativos em Portugu√™s**: Otimizados especificamente para BR
- **Fallback Inteligente M√∫ltiplo**: 4 camadas de seguran√ßa para sempre responder

### üéØ **Melhorias de Performance**
- **Chunk Size**: 400 ‚Üí 600 tokens (+50% contexto)
- **Top-K Results**: 8 ‚Üí 12 (+50% precis√£o)
- **Overlap**: 80 ‚Üí 120 tokens (+50% continuidade)
- **Quality Score**: Sistema de avalia√ß√£o autom√°tica (threshold 0.4)
- **Silent Processing**: Interface limpa sem informa√ß√µes t√©cnicas

### üáßüá∑ **Otimiza√ß√µes para Portugu√™s**
- **Limpeza Autom√°tica**: Remove tags [TAGS:] automaticamente
- **Contexto Inteligente**: Limita a 2 linhas mais relevantes
- **Valida√ß√£o Rigorosa**: Respostas entre 15-400 caracteres
- **Fallback RAG Direto**: Usa contexto original se IA falhar
- **Respostas Padronizadas**: Para cen√°rios extremos

### üõ†Ô∏è **Arquitetura Robusta**
- **M√∫ltiplos Modelos**: FLAN-T5 base + small como fallback
- **Carregamento Inteligente**: Detecta GPU/CPU automaticamente
- **Tratamento de Erros**: Sistema robusto com recupera√ß√£o autom√°tica
- **Mem√≥ria Otimizada**: Uso eficiente para sistemas limitados

### üîß **Melhorias T√©cnicas**
- **JSONL Support**: Formato estruturado para melhor organiza√ß√£o
- **546 Entradas**: Base de conhecimento ICTA expandida
- **8 Arquivos Tem√°ticos**: Organiza√ß√£o por especialidade
- **Hist√≥rico Melhorado**: Conversas salvas com timestamp
- **Performance Monitoring**: M√©tricas internas de qualidade

### üêõ **Corre√ß√µes Importantes**
- Problemas de encoding em caracteres especiais
- Loops infinitos em respostas inadequadas  
- Travamentos com contextos muito longos
- Inconsist√™ncias na interface multil√≠ngue
- Problemas de mem√≥ria com modelos grandes

---

## üöÄ Changelog da Vers√£o 3.0 (Anterior)

### ‚ú® **Novidades**
- **Interface Totalmente Interativa**: Menus coloridos substituem linha de comando
- **Sistema de Ajuda Integrado**: Guias completos dentro do programa
- **Status em Tempo Real**: Verifica√ß√£o autom√°tica de configura√ß√£o
- **Melhor Experi√™ncia**: Explica√ß√µes em cada op√ß√£o
- **Detec√ß√£o de Problemas**: Identifica e sugere solu√ß√µes

### üîß **Melhorias**
- **Performance**: Processamento mais r√°pido
- **Estabilidade**: Tratamento melhor de erros
- **Usabilidade**: Interface muito mais amig√°vel
- **Documenta√ß√£o**: README completamente reescrito
- **Compatibilidade**: Funciona melhor no Windows

### üêõ **Corre√ß√µes**
- Problemas com encoding de caracteres
- Erros de path no Windows
- Travamentos durante processamento
- Mensagens de erro confusas

---


*Se este projeto te ajudou, considere dar uma ‚≠ê no GitHub!*
